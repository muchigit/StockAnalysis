import { useState, useEffect } from 'react';

type Lang = 'en' | 'ja';

const dictionary = {
    en: {
        dashboardTitle: "Investment Dashboard",
        automation: "Automation",
        runImport: "Run Import",
        importStarted: "Import started!",
        importCompleted: "Import completed!",
        importFailed: "Import failed",
        importPlaceholder: "C:\\path\\to\\export.xls",
        importing: "Importing...",
        noStocksFound: "No stocks found. Run import to get started.",
        loading: "Loading...",
        stockNotFound: "Stock not found",
        backToDashboard: "Back to Dashboard",
        priceChart: "Price Chart",
        noChartData: "No Chart Data",
        technicalSignals: "Technical Signals",
        analysisNotes: "Analysis / Notes",
        tradeHistory: "Trade History",
        noTradesFound: "No trades found.",
        date: "Date",
        side: "Side",
        qty: "Qty",
        price: "Price",
        value: "Value",
        pl: "P&L",
        triggered: "TRIGGERED",
        holding: "Holding",
        pastTrade: "Past Trade",
        geminiPending: "Gemini integration pending...",
        buy: "Buy",
        sell: "Sell",
        ticker: "Ticker",
        company: "Company",
        sector: "Sector",
        industry: "Industry",
        status: "Status",
        lastBuy: "Last Buy",
        lastSell: "Last Sell",
        totalPL: "Total P&L",
        change5d: "5D %",
        change20d: "20D %",
        change50d: "50D %",
        change200d: "200D %",
        filterAll: "All",
        filterHolding: "Holding",
        filterPast: "Past",
        filterTrending: "Trending (200MA)",
        searchPlaceholder: "Search Ticker, Company...",
        showingStocks: "Showing {{count}} of {{total}} stocks",
        noteSaved: "Note saved",
        dailyChart: "Daily",
        weeklyChart: "Weekly",
        viewOnTradingView: "View on TradingView",
        myNotes: "Notes",
        saveNote: "Save",
        geminiAnalysis: "AI Analysis",
        noAnalysis: "No Analysis",
        prev: "Prev",
        next: "Next",
        filterNotes: "Has Notes",
        refreshAnalysis: "Refresh Analysis",
        companyName: "Company",
        rate: "Rate",
        note: "Note",
        realizedPL: "Realized P&L",
        importedAt: "Imported At",
        saveView: "Save View",
        deleteView: "Delete View",
        columns: "Columns",
        custom: "Custom",
        advancedFilter: "Advanced Filter",
        analysis: "Analysis",
        save: "Save",
        cancel: "Cancel",
        apply: "Apply",
        visibleOrder: "Visible (Order)",
        available: "Available",
        confirmDeleteView: "Delete this view?",
        enterViewName: "Enter view name",
        deleteStock: "Delete Stock",
        confirmDeleteStock: "Are you sure you want to delete this stock? Notes and history will be removed.",
        copyPrompt: "Copy Prompt",
        generating: "Generating...",
        openReport: "Open Report",
        dev5: "Dev 5MA",
        dev20: "Dev 20MA",
        dev50: "Dev 50MA",
        dev200: "Dev 200MA",
        geminiPrompt: "Gemini Prompt",
        confirmStop: "Stop research?",
        failedToDelete: "Failed to delete",
        updateFailed: "Update failed",
        failedToOpenFile: "Failed to open file",
        failedToStop: "Failed to stop",
        chart: "Chart",
        chartLarge: "Chart (Large)",
        delete: "Delete",
        marketCap: "Market Cap",
        volume: "Volume",
        volIncrease: "Vol % Inc",
        lastEarnings: "Last Earnings",
        nextEarnings: "Next Earnings",
        // Deep Research
        deepResearchTitle: "Deep Research Automation",
        addToDeepResearch: "Add to Deep Research list",
        targetTickers: "Target Tickers (One per line)",
        clearList: "Clear List",
        confirmClearList: "Clear ticker list?",
        selectPrompt: "Select Prompt",
        editPrompts: "Edit Prompts",
        selectPromptPlaceholder: "Select a prompt...",
        startResearch: "START RESEARCH ğŸš€",
        starting: "Starting...",
        stopExecution: "STOP EXECUTION â¹ï¸",
        executionStatus: "Execution Status",
        ready: "Ready",
        processed: "Processed",
        currentTask: "Current Task",
        processing: "Processing: ",
        idle: "Idle",
        executionLogs: "Execution Logs",
        enterSymbolsAndPrompt: "Please enter symbols and select a prompt.",
        failedToStart: "Failed to start research",
        addedToResearch: "Added {{symbol}} to Deep Research list ğŸ§ ",
        indexAdded: "Index added successfully",
        failedToAddIndex: "Failed to add index",
        reportsUpdated: "Reports updated",
        toggleBuyCandidate: "Toggle Buy Candidate",
        failedToUpdate: "Failed to update",
        alert: "Alert",
        dashboard: "Dashboard",
        refresh: "Refresh",
        import: "Import",
        settings: "Settings",
        all: "All",
        trending: "Trending",
        withNotes: "With Notes"
    },
    ja: {
        dashboardTitle: "æŠ•è³‡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
        automation: "è‡ªå‹•åŒ–",
        runImport: "ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Ÿè¡Œ",
        importing: "ã‚¤ãƒ³ãƒãƒ¼ãƒˆä¸­...",
        importStarted: "ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’é–‹å§‹ã—ã¾ã—ãŸï¼",
        importCompleted: "ã‚¤ãƒ³ãƒãƒ¼ãƒˆå®Œäº†ï¼",
        importFailed: "ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¤±æ•—",
        importPlaceholder: "C:\\path\\to\\export.xls",
        noStocksFound: "éŠ˜æŸ„ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚",
        loading: "èª­ã¿è¾¼ã¿ä¸­...",
        stockNotFound: "éŠ˜æŸ„ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",
        backToDashboard: "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹",
        priceChart: "æ ªä¾¡ãƒãƒ£ãƒ¼ãƒˆ",
        noChartData: "ãƒãƒ£ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ãªã—",
        technicalSignals: "ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™",
        analysisNotes: "åˆ†æãƒ»ãƒ¡ãƒ¢",
        tradeHistory: "å–å¼•å±¥æ­´",
        noTradesFound: "å–å¼•å±¥æ­´ãªã—",
        date: "æ—¥ä»˜",
        side: "å£²è²·",
        qty: "æ•°é‡",
        price: "ä¾¡æ ¼",
        value: "é‡‘é¡",
        pl: "æç›Š",
        triggered: "ã‚·ã‚°ãƒŠãƒ«ç‚¹ç¯",
        holding: "ä¿æœ‰ä¸­",
        pastTrade: "éå»å–å¼•",
        geminiPending: "Geminié€£æºæº–å‚™ä¸­...",
        buy: "è²·ã„",
        sell: "å£²ã‚Š",
        ticker: "éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰",
        company: "ç¤¾å",
        sector: "ã‚»ã‚¯ã‚¿ãƒ¼",
        industry: "æ¥­ç¨®",
        status: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
        lastBuy: "ç›´è¿‘è²·ä»˜",
        lastSell: "ç›´è¿‘å£²å´",
        totalPL: "åˆè¨ˆæç›Š",
        change5d: "ç›´è¿‘5æ—¥",
        change20d: "ç›´è¿‘20æ—¥",
        change50d: "ç›´è¿‘50æ—¥",
        change200d: "ç›´è¿‘200æ—¥",
        filterAll: "ã™ã¹ã¦",
        filterHolding: "ä¿æœ‰ä¸­",
        filterPast: "éå»å–å¼•",
        filterTrending: "ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰(200æ—¥ç·š)",
        searchPlaceholder: "éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰ã€ç¤¾åã€ã‚»ã‚¯ã‚¿ãƒ¼ã§æ¤œç´¢...",
        showingStocks: "{{total}} éŠ˜æŸ„ä¸­ {{count}} éŠ˜æŸ„ã‚’è¡¨ç¤º",
        noteSaved: "ãƒ¡ãƒ¢ã‚’ä¿å­˜ã—ã¾ã—ãŸ",
        dailyChart: "æ—¥è¶³",
        weeklyChart: "é€±è¶³",
        viewOnTradingView: "TradingViewã§è¦‹ã‚‹",
        myNotes: "ãƒ¡ãƒ¢",
        saveNote: "ä¿å­˜",
        geminiAnalysis: "AIåˆ†æ",
        noAnalysis: "åˆ†æãƒ¬ãƒãƒ¼ãƒˆãªã—",
        prev: "å‰ã¸",
        next: "æ¬¡ã¸",
        filterNotes: "ãƒ¡ãƒ¢æœ‰",
        refreshAnalysis: "AIåˆ†ææ›´æ–°",
        companyName: "ç¤¾å",
        rate: "ãƒ¬ãƒ¼ãƒˆ",
        note: "ãƒ¡ãƒ¢",
        realizedPL: "ç¢ºå®šæç›Š",
        importedAt: "å–è¾¼æ—¥",
        saveView: "ãƒ“ãƒ¥ãƒ¼ä¿å­˜",
        deleteView: "ãƒ“ãƒ¥ãƒ¼å‰Šé™¤",
        columns: "åˆ—è¨­å®š",
        custom: "ã‚«ã‚¹ã‚¿ãƒ ",
        advancedFilter: "è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿",
        analysis: "AIåˆ†æ",
        save: "ä¿å­˜",
        cancel: "ã‚­ãƒ£ãƒ³ã‚»ãƒ«",
        apply: "é©ç”¨",
        visibleOrder: "è¡¨ç¤ºä¸­ (é †åº)",
        available: "éè¡¨ç¤º",
        confirmDeleteView: "ã“ã®ãƒ“ãƒ¥ãƒ¼ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ",
        enterViewName: "ãƒ“ãƒ¥ãƒ¼ã®åå‰ã‚’å…¥åŠ›",
        deleteStock: "éŠ˜æŸ„ã‚’å‰Šé™¤",
        confirmDeleteStock: "æœ¬å½“ã«ã“ã®éŠ˜æŸ„ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿãƒ¡ãƒ¢ã‚„å±¥æ­´ã‚‚å…¨ã¦å‰Šé™¤ã•ã‚Œã¾ã™ã€‚",
        copyPrompt: "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚³ãƒ”ãƒ¼",
        generating: "ç”Ÿæˆä¸­...",
        openReport: "ãƒ¬ãƒãƒ¼ãƒˆã‚’é–‹ã",
        dev5: "ä¹–é›¢(5MA)",
        dev20: "ä¹–é›¢(20MA)",
        dev50: "ä¹–é›¢(50MA)",
        dev200: "ä¹–é›¢(200MA)",
        geminiPrompt: "Geminiãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ",
        confirmStop: "åœæ­¢ã—ã¾ã™ã‹ï¼Ÿ",
        failedToDelete: "å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ",
        updateFailed: "æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ",
        failedToOpenFile: "ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã‘ã¾ã›ã‚“ã§ã—ãŸ",
        failedToStop: "åœæ­¢ã«å¤±æ•—ã—ã¾ã—ãŸ",
        chart: "ãƒãƒ£ãƒ¼ãƒˆ",
        chartLarge: "ãƒãƒ£ãƒ¼ãƒˆ(å¤§)",
        delete: "å‰Šé™¤",
        marketCap: "æ™‚ä¾¡ç·é¡",
        volume: "å‡ºæ¥é«˜",
        volIncrease: "å‡ºæ¥é«˜å¢—åŠ ç‡",
        lastEarnings: "ç›´è¿‘æ±ºç®—å ±å‘Šæ—¥",
        nextEarnings: "æ¬¡å›æ±ºç®—å ±å‘Šæ—¥",
        // Deep Research
        deepResearchTitle: "Deep Research è‡ªå‹•åŒ–",
        addToDeepResearch: "Deep Researchãƒªã‚¹ãƒˆã«è¿½åŠ ",
        targetTickers: "å¯¾è±¡éŠ˜æŸ„ (1è¡Œã«1ã¤)",
        clearList: "ãƒªã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢",
        confirmClearList: "ãƒªã‚¹ãƒˆã‚’ã‚¯ãƒªã‚¢ã—ã¾ã™ã‹ï¼Ÿ",
        selectPrompt: "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé¸æŠ",
        editPrompts: "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç·¨é›†",
        selectPromptPlaceholder: "ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„...",
        startResearch: "ãƒªã‚µãƒ¼ãƒé–‹å§‹ ğŸš€",
        starting: "é–‹å§‹ä¸­...",
        stopExecution: "å®Ÿè¡Œåœæ­¢ â¹ï¸",
        executionStatus: "å®Ÿè¡Œã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹",
        ready: "å¾…æ©Ÿä¸­",
        processed: "å‡¦ç†æ¸ˆã¿",
        currentTask: "ç¾åœ¨ã®ã‚¿ã‚¹ã‚¯",
        processing: "å‡¦ç†ä¸­: ",
        idle: "ã‚¢ã‚¤ãƒ‰ãƒ«",
        executionLogs: "å®Ÿè¡Œãƒ­ã‚°",
        enterSymbolsAndPrompt: "éŠ˜æŸ„ã‚’å…¥åŠ›ã—ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚",
        failedToStart: "é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ",
        addedToResearch: "Deep Researchãƒªã‚¹ãƒˆã«è¿½åŠ ã—ã¾ã—ãŸ ğŸ§ : {{symbol}}",
        indexAdded: "ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ ã—ã¾ã—ãŸ",
        failedToAddIndex: "ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã®è¿½åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ",
        reportsUpdated: "ãƒ¬ãƒãƒ¼ãƒˆæƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ",
        toggleBuyCandidate: "è²·ã„å€™è£œã‚’åˆ‡ã‚Šæ›¿ãˆ",
        failedToUpdate: "æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ",
        alert: "ã‚¢ãƒ©ãƒ¼ãƒˆ",
        dashboard: "ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰",
        refresh: "æ›´æ–°",
        import: "ã‚¤ãƒ³ãƒãƒ¼ãƒˆ",
        settings: "è¨­å®š",
        all: "ã™ã¹ã¦",
        trending: "ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰",
        withNotes: "ãƒ¡ãƒ¢æœ‰"
    }
};

export function useTranslation() {
    const [lang, setLang] = useState<Lang>('ja'); // Default to JA or detect

    useEffect(() => {
        // Simple browser detection
        const browserLang = navigator.language;
        if (browserLang.startsWith('en')) {
            setLang('en');
        } else {
            setLang('ja');
        }
    }, []);

    function t(key: keyof typeof dictionary['en']) {
        return dictionary[lang][key] || dictionary['en'][key] || key;
    }

    return { t, lang, setLang };
}
